(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{137:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),c=a(37),o=a.n(c),l=(a(73),a(1)),i=a(2),m=a(5),u=a(4),d=a(6),h=a(63),p=(a(74),a(28)),g=a(27),b=a.n(g),f=b.a.create({withCredentials:!0}),v=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logoutHandler=function(){f.get("".concat("https://ironhack-concerts.herokuapp.com","/auth/logout")).then((function(){localStorage.removeItem("user"),a.props.history.push("/auth/login")}))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg bg-primary navbar-dark"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse justify-content-center",id:"collapsibleNavbar"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link display-4 font-weight-bold",to:"/home"},"Home |")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link display-4 font-weight-bold",to:"/favorites"},"Favorites |")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link display-4 font-weight-bold",to:"/connect"},"Connect |")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link display-4 font-weight-bold",to:"/",onClick:this.logoutHandler},"Logout")))))}}]),t}(n.Component),E=Object(p.f)(v),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){var t=e.target.value,n=a.state.venues.filter((function(e){return-1!==e.metroArea.displayName.toLowerCase().indexOf(t.toLowerCase())}));a.setState({filteredVenues:n})},a.state={venues:a.props.venues||[],filteredVenues:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.filteredVenues.length>0?r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement("input",{className:"text-center d-block mx-auto my-3 border border-top-0 border-right-0 border-left-0",type:"text",placeholder:"Filter by city",onChange:this.changeHandler}),this.state.filteredVenues.map((function(e){return r.a.createElement("div",{className:"border border-top-0 border-right-0 border-left-0 my-3 p-3"},r.a.createElement("h3",{className:"text-primary"},e.displayName),r.a.createElement("p",null,r.a.createElement("span",{className:"font-weight-bold mr-2"},"Hosting city:"),e.metroArea.displayName,", ",e.metroArea.country.displayName),r.a.createElement(s.b,{to:"/events/".concat(e.id),className:"btn btn-primary"},"Check Events"))}))):r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement("input",{type:"text",className:"text-center d-block mx-auto my-3 border-top-0 border-right-0 border-left-0",placeholder:"Filter by city",onChange:this.changeHandler}),this.state.venues&&this.state.venues.map((function(e){return r.a.createElement("div",{className:"border border-top-0 border-right-0 border-left-0 my-3 p-3"},r.a.createElement("h3",{className:"text-primary"},e.displayName),r.a.createElement("p",null,r.a.createElement("span",{className:"font-weight-bold mr-2"},"Hosting city:"),e.metroArea.displayName,", ",e.metroArea.country.displayName),r.a.createElement(s.b,{to:"/events/".concat(e.id),className:"btn btn-primary"},"Check Events"))}))))}}]),t}(n.Component),N=Object(p.f)(y),k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState({keywords:e.target.value})},a.submitHandler=function(e){e.preventDefault(),b.a.get("https://api.songkick.com/api/3.0/search/venues.json?query=".concat(a.state.keywords,"&apikey=").concat("AIszvHIZrxVAd5ls")).then((function(e){a.setState({venues:e.data.resultsPage.results.venue||[]})})).catch((function(e){console.log(e)}))},a.state={keywords:"",venues:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.venues.length>0?r.a.createElement(N,{venues:this.state.venues}):r.a.createElement("div",{className:"bg-img d-flex flex-column justify-content-center align-items-center mb-3"},r.a.createElement("div",{className:"main-txt text-white lead display-2 mb-2"},"Search For Events Tailored To Your Taste"),r.a.createElement("form",{className:"form-inline d-flex flex-column text-black font-weight-bold",onSubmit:this.submitHandler},r.a.createElement("input",{type:"text",onChange:this.changeHandler,name:"keywords",placeholder:"Enter keywords",className:"py-2 px-auto my-3"}),r.a.createElement("button",{type:"submit",className:"btn btn-danger btn-lg"},"Search"))))}}]),t}(n.Component),O=a(31),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).clickHandler=function(e,t,n,r,s){var c=JSON.parse(localStorage.getItem("user")),o=Object(O.a)(a.state.favorites);o.push(r),a.setState({favorites:o}),f({method:"GET",url:"".concat("https://ironhack-concerts.herokuapp.com","/auth/add/").concat(c._id,"?image=").concat(e,"&artistName=").concat(t,"&venueName=").concat(n,"&eventId=").concat(r,"&artistId=").concat(s)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},a.displayHeart=function(e){for(var t=0;t<a.state.favorites.length;t++)if(a.state.favorites[t].eventId===e.id)return!0;return!1},a.toggleHover=function(e){f.get("".concat("https://ironhack-concerts.herokuapp.com","/auth/favorites/hover/").concat(e)).then((function(t){a.setState({selectedEvents:t.data,hover:e})})).catch((function(e){console.log(e)}))},a.deleteHandler=function(e){var t=JSON.parse(localStorage.getItem("user"));f({method:"POST",url:"".concat("https://ironhack-concerts.herokuapp.com","/auth/favorites/delete/").concat(t._id,"/").concat(e)}).then((function(e){a.setState({favorites:e.data})})).catch((function(e){return console.log(e)}))},a.clearHoverState=function(){a.setState({hover:!1})},a.state={events:[],favorites:[],hover:!1,selectedEvents:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")),a=this.props.match.params.id;b.a.get("https://api.songkick.com/api/3.0/venues/".concat(a,"/calendar.json?apikey=").concat("AIszvHIZrxVAd5ls")).then((function(a){f({method:"GET",url:"".concat("https://ironhack-concerts.herokuapp.com","/auth/favorites/").concat(t._id)}).then((function(t){e.setState({favorites:t.data,events:a.data.resultsPage.results.event})})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(e){var t=this,a=JSON.parse(localStorage.getItem("user"));f.get("".concat("https://ironhack-concerts.herokuapp.com","/auth/favorites/").concat(a._id)).then((function(a){e.favorites!==a.data&&t.setState({favorites:a.data})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-wrap container"},this.state.events?r.a.createElement(r.a.Fragment,null,this.state.events.map((function(t){return r.a.createElement("div",{className:"card m-3",style:{width:"330px"}},r.a.createElement("img",{className:"card-img-top",alt:"",src:"https://images.sk-static.com/images/media/profile_images/artists/".concat(t.performance[0].artist.id,"/huge_avatar")}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},t.performance[0].artist.displayName),r.a.createElement("p",{className:"card-text"},t.venue.displayName),r.a.createElement(s.b,{to:"/event-details/".concat(t.id),className:"btn btn-primary"},"Event Details"),e.displayHeart(t)?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onMouseEnter:function(){return e.toggleHover(t.id)},onMouseLeave:e.clearHoverState,className:"h-50"},r.a.createElement("i",{onClick:function(){return e.deleteHandler(t.id)},className:"fa fa-heart float-right btn-lg",style:{color:"red"}})),e.state.hover===t.id?r.a.createElement("div",{className:"border w-75 mt-2 ml-3"},r.a.createElement("h4",null,"People with common interests!!"),e.state.selectedEvents.map((function(e){return r.a.createElement("li",{className:"lead font-weight-bold"},e.userId.username)}))):""):r.a.createElement("div",{className:"h-50"},r.a.createElement("i",{className:"fa fa-heart float-right btn-lg",style:{color:"black"},name:t.id,onClick:function(){e.clickHandler(t.performance[0].artist.uri,t.performance[0].artist.displayName,t.venue.displayName,t.id,t.performance[0].artist.id)}}))))}))):r.a.createElement("div",{className:"border bg-light border-primary text-white w-50 h-50 p-3 my-3"},r.a.createElement("h1",{class:"oops"},"Oops!",r.a.createElement("span",null,"There are no events for the chosen venue...!!")),r.a.createElement("br",null),r.a.createElement(s.b,{className:"btn btn-primary mt-3",to:"/home"},"Take Me Back Please!!!"))))}}]),t}(n.Component),w=a(30),x=a(66),S=Object(w.c)({accessToken:"pk.eyJ1IjoibmloYXJpa2E5NTIxOCIsImEiOiJjazIzYmw2NDMxczVhM3B1Z3I1c2RmMXd2In0.IKDbblC0k7rWIvwpIohgsA"}),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={details:{start:{date:"",time:""},performance:[{artist:{}}],venue:{metroArea:{displayName:"",country:{}}},location:{}}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;b.a.get("https://api.songkick.com/api/3.0/events/".concat(t,".json?apikey=").concat("AIszvHIZrxVAd5ls")).then((function(t){e.setState({details:t.data.resultsPage.results.event})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.details.location.lat,t=this.state.details.location.lng;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-around align-items-center detail-div"},r.a.createElement("img",{className:"each",src:"https://images.sk-static.com/images/media/profile_images/artists/".concat(this.state.details.performance[0].artist.id,"/huge_avatar"),alt:""}),r.a.createElement("div",{className:"bg-light text-dark p-4 d-flex flex-column justify-content-around"},r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement("strong",null,"Event Name:")," ",this.state.details.displayName),r.a.createElement("h2",null,r.a.createElement("strong",null,"Event Date:")," ",this.state.details.start.date),r.a.createElement("h2",null,r.a.createElement("strong",null,"Popularity:")," ",this.state.details.popularity),r.a.createElement("h2",null,r.a.createElement("strong",null,"Event Time:")," ",this.state.details.start.time),r.a.createElement("h2",null,r.a.createElement("strong",null,"Event Hosted At:")," ",this.state.details.venue.metroArea.displayName,", ",this.state.details.venue.metroArea.country.displayName),r.a.createElement("h2",null,r.a.createElement("strong",null,"Website:")," ",r.a.createElement("a",{href:this.state.details.venue.website,className:"text-decoration-none"},this.state.details.venue.website))),e?r.a.createElement(x.a,{queries:{mobile:{maxWidth:640}}},(function(a){return console.log(a.mobile),a.mobile?r.a.createElement(S,{center:[t,e],style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"50vh",width:"80vw"}},r.a.createElement(w.b,{type:"symbol",id:"marker",layout:{"icon-image":"marker-15"}},r.a.createElement(w.a,{coordinates:[{lng:t},{lat:e}]}))):r.a.createElement(S,{center:[t,e],style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"50vh",width:"45vw"}},r.a.createElement(w.b,{type:"symbol",id:"marker",layout:{"icon-image":"marker-15"}},r.a.createElement(w.a,{coordinates:[{lng:t},{lat:e}]})))})):null)))}}]),t}(n.Component),H=a(23),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.submitHandler=function(e){e.preventDefault();var t={username:a.state.username,email:a.state.email,password:a.state.password};f.post("".concat("https://ironhack-concerts.herokuapp.com","/auth/signup"),t).then((function(e){e.data.message?a.setState({message:e.data.message}):(localStorage.setItem("user",JSON.stringify(e.data)),a.props.user(),a.props.history.push("/home"))})).catch((function(e){console.log(e)}))},a.state={username:"",email:"",password:"",message:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center bg-info signup-div"},this.state.message?r.a.createElement("p",{className:"border p-2 font-weight-bolder rounded border-white text-danger bg-white"},this.state.message):null,r.a.createElement("form",{action:"/auth/signup",method:"POST",className:"border border-dark rounded d-flex flex-column align-items-between ml-3 mr-n3 p-3 bg-light",onSubmit:this.submitHandler},r.a.createElement("h1",null,"Come, Join Us!"),r.a.createElement("div",{className:"py-3"},r.a.createElement("label",{for:"username"},"Username"),r.a.createElement("input",{type:"text",className:"ml-3",name:"username",onChange:this.changeHandler})),r.a.createElement("div",{className:"py-3"},r.a.createElement("label",{for:"email"},"Email"),r.a.createElement("input",{type:"email",className:"ml-3",name:"email",onChange:this.changeHandler})),r.a.createElement("div",{className:"py-3"},r.a.createElement("label",{for:"password"},"Password"),r.a.createElement("input",{type:"password",className:"ml-3",name:"password",onChange:this.changeHandler})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary"},"Create Account")),r.a.createElement("p",null,"Already got an account? ",r.a.createElement(s.b,{to:"/auth/login"},"Login"))))}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.submitHandler=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};f.post("".concat("https://ironhack-concerts.herokuapp.com","/auth/login"),t).then((function(e){e.data.message?a.setState({message:e.data.message}):(localStorage.setItem("user",JSON.stringify(e.data)),a.props.user(),a.props.history.push("/home"))})).catch((function(e){console.log(e)}))},a.state={email:"",password:"",message:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center login-div"},this.state.message?r.a.createElement("p",{className:"text-danger p-2 bg-white font-weight-bolder border rounded border-white"},this.state.message):null,r.a.createElement("form",{action:"/auth/signup",method:"POST",onSubmit:this.submitHandler,className:"border border-dark rounded d-flex flex-column align-items-between ml-3 mr-n3 p-3 bg-light"},r.a.createElement("h1",{className:"mb-3 pd-1"},"Why wait, login!!"),r.a.createElement("div",null,r.a.createElement("label",{for:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",className:"ml-3 mb-2",onChange:this.changeHandler})),r.a.createElement("div",null,r.a.createElement("label",{for:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",className:"ml-3",onChange:this.changeHandler})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary"},"Login")),r.a.createElement(s.b,{to:"/auth/send-reset"},"Forgot Password?")))}}]),t}(n.Component),M=a(47),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleResponse=function(e){console.log(e);var t={username:e.profile.name,email:e.profile.email,facebookId:e.profile.id};f.post("".concat("https://ironhack-concerts.herokuapp.com","/auth/fb-login"),t).then((function(e){localStorage.setItem("user",JSON.stringify(e.data)),a.props.user(),a.props.history.push("/home")})).catch((function(e){a.setState({error:e})}))},a.handleError=function(e){a.setState({error:e})},a.state={error:null},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"bg-img d-flex flex-column justify-content-center align-items-center"},r.a.createElement("div",{className:"main-txt text-white lead display-2 mb-2"},"Search For Events Tailored To Your Taste"),r.a.createElement("div",{className:"mb-3"},r.a.createElement(s.b,{to:"/auth/signup",className:"btn btn-danger btn-lg mr-3"},"Signup"),r.a.createElement(s.b,{to:"/auth/login",className:"btn btn-danger btn-lg"},"Login")),r.a.createElement(M.FacebookProvider,{appId:"928765154159482"},r.a.createElement(M.LoginButton,{scope:"email",onCompleted:this.handleResponse,onError:this.handleError},r.a.createElement("span",{className:"btn btn-primary btn-lg"},"Login via Facebook"))))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).deleteHandler=function(e){var t=JSON.parse(localStorage.getItem("user"));f({method:"POST",url:"".concat("https://ironhack-concerts.herokuapp.com","/auth/favorites/delete/").concat(t._id,"/").concat(e)}).then((function(e){a.setState({favorites:e.data})})).catch((function(e){return console.log(e)}))},a.state={favorites:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));f({method:"GET",url:"".concat("https://ironhack-concerts.herokuapp.com","/auth/favorites/").concat(t._id)}).then((function(t){e.setState({favorites:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"d-flex flex-wrap container"},this.state.favorites.map((function(t){return r.a.createElement("div",{className:"card m-3",style:{width:"330px"}},r.a.createElement("img",{className:"card-img-top",alt:"",src:"https://images.sk-static.com/images/media/profile_images/artists/".concat(t.artistId,"/huge_avatar")}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},t.artistName),r.a.createElement("p",{className:"card-text"},t.venueName),r.a.createElement(s.b,{to:"/event-details/".concat(t.eventId),className:"btn btn-primary"},"Event Details"),r.a.createElement("button",{className:"btn btn-primary float-right text-white",onClick:function(){return e.deleteHandler(t.eventId)}},"Remove Favorite")))})))}}]),t}(n.Component),P=a(15),A=a(48),F=a.n(A);function R(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(H.a)({},n,a))}function J(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d1725b35-c95a-49e9-a454-b6be719a8acb",a=this.state.currentUser;return this.setState({messages:[]}),a.subscribeToRoom({roomId:"".concat(t),messageLimit:100,hooks:{onMessage:function(t){e.setState({messages:[].concat(Object(O.a)(e.state.messages),[t])})},onPresenceChanged:function(){var t=e.state.currentRoom;e.setState({roomUsers:t.users.sort((function(e){return"online"===e.presence.state?-1:1}))})}}}).then((function(t){var n=t.customData&&t.customData.isDirectMessage?t.customData.userIds.filter((function(e){return e!==a.id}))[0]:t.name;e.setState({currentRoom:t,roomUsers:t.users,rooms:a.rooms,roomName:n})})).catch(console.error)}function L(e){var t=this;null!==e&&""!==e.trim()?f.post("".concat("https://ironhack-concerts.herokuapp.com","/users"),{username:e}).then((function(e){var a=e.data,n=new F.a.TokenProvider({url:"".concat("https://ironhack-concerts.herokuapp.com","/authenticate")});return new F.a.ChatManager({instanceLocator:"".concat("v1:us1:5d9bb748-df8d-4fe5-bf97-6c2f52a7c773"),userId:a,tokenProvider:n}).connect({onAddedToRoom:function(e){var a=t.state.rooms;t.setState({rooms:[].concat(Object(O.a)(a),[e])})}}).then((function(e){t.setState({currentUser:e,showLogin:!1,rooms:e.rooms},(function(){return J.call(t)}))}))})).catch(console.error):alert("Invalid userId")}function _(e){e.preventDefault();var t=this.state,a=t.newMessage,n=t.currentUser,r=t.currentRoom;""!==a.trim()&&(n.sendMessage({text:a,roomId:"".concat(r.id)}),this.setState({newMessage:""}))}function z(e){var t=this.state,a=t.currentUser,n=t.rooms,r="".concat(a.id,"_").concat(e),s=n.filter((function(t){if(t.customData&&t.customData.isDirectMessage){var n=[a.id,e],r=t.customData.userIds;if(n.sort().join("")===r.sort().join(""))return{room:t}}return!1}));return s.length>0?Promise.resolve(s[0]):a.createRoom({name:"".concat(r),private:!0,addUserIds:["".concat(e)],customData:{isDirectMessage:!0,userIds:[a.id,e]}})}function V(e){var t=this;z.call(this,e).then((function(e){J.call(t,e.id)}))}var Y=function(e){var t=e.rooms,a=e.currentRoom,n=e.connectToRoom,s=e.currentUser,c=t.map((function(e){var t=e.isPrivate?"\ud83d\udd12":"\ud83c\udf10",c=e.id===a.id?"active":"";return r.a.createElement("li",{className:c,key:e.id,onClick:function(){return n(e.id)}},r.a.createElement("span",{className:"room-icon"},t),e.customData&&e.customData.isDirectMessage?r.a.createElement("span",{className:"room-name"},e.customData.userIds.filter((function(e){return e!==s.id}))[0]):r.a.createElement("span",{className:"room-name"},e.name))}));return r.a.createElement("div",{className:"rooms"},r.a.createElement("ul",{className:"chat-rooms"},c))},W=a(140),Z=function(e){return e.messages.map((function(e){var t=Object(W.a)(new Date("".concat(e.updatedAt)),"HH:mm");return r.a.createElement("li",{className:"message",key:e.id},r.a.createElement("div",null,r.a.createElement("span",{className:"user-id"},e.senderId),r.a.createElement("span",null,e.text)),r.a.createElement("span",{className:"message-time"},t))}))},B=function(e){var t=e.roomUsers,a=e.sendDM,n=e.currentUser,s=t.map((function(e){return r.a.createElement("li",{className:"room-member",key:e.id},r.a.createElement("div",null,r.a.createElement("span",{className:"presence ".concat(e.presence.state)}),r.a.createElement("span",null,e.name)),n.id!==e.id?r.a.createElement("button",{onClick:function(){return a(e.id)},title:"Send ".concat(e.name," a direct message"),className:"send-dm"},"+"):null)}));return r.a.createElement("div",{className:"room-users"},r.a.createElement("ul",null,s))},q=(a(137),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={userId:"",showLogin:!0,isLoading:!1,currentUser:null,currentRoom:null,rooms:[],roomUsers:[],roomName:null,messages:[],newMessage:""},e.handleInput=R.bind(Object(P.a)(e)),e.connectToChatkit=L.bind(Object(P.a)(e)),e.connectToRoom=J.bind(Object(P.a)(e)),e.sendMessage=_.bind(Object(P.a)(e)),e.sendDM=V.bind(Object(P.a)(e)),e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("user")).username;this.connectToChatkit(e)}},{key:"render",value:function(){var e=this.state,t=(e.userId,e.showLogin,e.rooms),a=e.currentRoom,n=e.currentUser,s=e.messages,c=e.newMessage,o=e.roomUsers,l=e.roomName;return r.a.createElement("div",{className:"App"},r.a.createElement("aside",{className:"sidebar left-sidebar"},n?r.a.createElement("div",{className:"user-profile"},r.a.createElement("span",{className:"user-id"},"".concat(n.id))):null,a?r.a.createElement(Y,{rooms:t,currentRoom:a,connectToRoom:this.connectToRoom,currentUser:n}):null),r.a.createElement("section",{className:"chat-screen"},r.a.createElement("header",{className:"chat-header"},a?r.a.createElement("h3",null,l):null),r.a.createElement("ul",{className:"chat-messages"},r.a.createElement(Z,{messages:s})),r.a.createElement("footer",{className:"chat-footer"},r.a.createElement("form",{onSubmit:this.sendMessage,className:"message-form"},r.a.createElement("input",{type:"text",value:c,name:"newMessage",className:"message-input",placeholder:"Type your message and hit ENTER to send",onChange:this.handleInput})))),r.a.createElement("aside",{className:"sidebar right-sidebar"},a?r.a.createElement(B,{currentUser:n,sendDM:this.sendDM,roomUsers:o}):null))}}]),t}(n.Component)),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState({password:e.target.value})},a.submitHandler=function(e){e.preventDefault();var t=a.state.password;f.post("".concat("https://ironhack-concerts.herokuapp.com","/auth/reset-password?token=").concat(a.props.match.params.token),{password:t}).then((function(e){a.props.history.push("/auth/login")})).catch((function(e){return console.log(e)}))},a.state={password:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.user()}},{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center reset-div"},r.a.createElement("form",{method:"POST",onSubmit:this.submitHandler,className:"border border-dark rounded d-flex flex-column align-items-center justify-content-around ml-3 mr-n3 p-3 bg-light"},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"password"},r.a.createElement("span",{className:"text-danger font-weight-bold lead"},"Password ",r.a.createElement("sup",null,"*"),"8 characters, at least 1 number and 1 letter")),r.a.createElement("input",{type:"password",name:"password",onChange:this.changeHandler,pattern:"^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$",value:this.state.password,placeholder:"Your New Password",class:"form-control",required:!0})),r.a.createElement("button",{type:"submit",class:"btn btn-primary",id:"reset-btn"},"Reset Password")))}}]),t}(n.Component),X=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).changeHandler=function(t){e.setState({email:t.target.value})},e.submitHandler=function(t){t.preventDefault();var a=e.state.email;f.post("".concat("https://ironhack-concerts.herokuapp.com","/auth/send-reset"),{email:a}).then((function(t){e.setState({successMessage:t.data})})).catch((function(e){return console.log(e)}))},e.state={email:"",successMessage:""},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.user()}},{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center send-div"},r.a.createElement("form",{method:"POST",onSubmit:this.submitHandler,className:"border border-dark rounded d-flex flex-column align-items-center justify-content-around ml-3 mr-n3 p-3 bg-light"},r.a.createElement("div",null,r.a.createElement("h1",{className:"text-success font-weight-bold"},"Reset Your Password Here!")),r.a.createElement("div",null,r.a.createElement("p",{id:"display",className:"text-center text-warning"},this.state.successMessage)),r.a.createElement("div",null,r.a.createElement("label",{for:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Your email",className:"ml-3 mb-3",onChange:this.changeHandler,required:!0}),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-primary",id:"send-btn"},"Send Reset Link"))))}}]),t}(n.Component),$=function(e){var t=e.component,a=e.loggedIn,n=Object(h.a)(e,["component","loggedIn"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,Object.assign({},e,n)):r.a.createElement(p.a,{to:"/auth/login"})}}))},K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).checkForUserStatus=function(){localStorage.getItem("user")?a.setState({loggedIn:!0}):a.setState({loggedIn:!1})},a.navDisplay=function(){var e=a.props.location.pathname;if("/"===a.props.location.pathname||"/home"===a.props.location.pathname||"/auth/signup"===a.props.location.pathname||"/auth/login"===a.props.location.pathname||e.indexOf("/auth/reset-password")>=0||"/auth/send-reset"===a.props.location.pathname)return!0},a.state={loggedIn:!!localStorage.getItem("user")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.navDisplay()?null:r.a.createElement(E,null),r.a.createElement(p.b,{path:"/",exact:!0,render:function(t){return r.a.createElement(T,Object.assign({},t,{user:e.checkForUserStatus}))}}),r.a.createElement($,{path:"/home",exact:!0,component:k,loggedIn:this.state.loggedIn}),r.a.createElement($,{path:"/events/:id",exact:!0,component:j,loggedIn:this.state.loggedIn}),r.a.createElement($,{path:"/event-details/:id",exact:!0,component:I,loggedIn:this.state.loggedIn}),r.a.createElement($,{path:"/favorites",exact:!0,component:U,loggedIn:this.state.loggedIn}),r.a.createElement($,{path:"/connect",exact:!0,component:q,loggedIn:this.state.loggedIn}),r.a.createElement(p.b,{path:"/auth/signup",exact:!0,render:function(t){return r.a.createElement(C,Object.assign({},t,{user:e.checkForUserStatus}))}}),r.a.createElement(p.b,{path:"/auth/send-reset",exact:!0,render:function(t){return r.a.createElement(X,Object.assign({},t,{user:e.checkForUserStatus}))}}),r.a.createElement(p.b,{path:"/auth/reset-password/:token",exact:!0,render:function(t){return r.a.createElement(G,Object.assign({},t,{user:e.checkForUserStatus}))}}),r.a.createElement(p.b,{path:"/auth/login",exact:!0,render:function(t){return r.a.createElement(D,Object.assign({},t,{user:e.checkForUserStatus}))}}))}}]),t}(n.Component),Q=Object(p.f)(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(s.a,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},68:function(e,t,a){e.exports=a(138)},73:function(e,t,a){},74:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.e2b79543.chunk.js.map